<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/template/template.xhtml">


	<ui:define name="title">Upskilling Web Application</ui:define>

	<ui:define name="content">


		<h:form id="form">
			<p:panel id="studentPanel">
				<p:dataTable value="#{mbStudent.studentTable}" var="s">

					<f:facet name="header">
						<h:outputText value="Students (#{mbStudent.studentTable.size()})" />
					</f:facet>

					<p:column headerText="Student ID" sortBy="#{s.studentId}">
						<h:outputText value="#{s.studentId}" />
					</p:column>

					<p:column headerText="English Name" sortBy="#{s.studentEName}">
						<h:outputText value="#{s.studentEName}" />
					</p:column>

					<p:column headerText="Arabic Name" sortBy="#{s.studentAName}">
						<h:outputText value="#{s.studentAName}" />
					</p:column>

					<p:column headerText="Mobile" sortBy="#{s.mobile}">
						<h:outputText value="#{s.mobile}" />
					</p:column>

					<p:column headerText="Birth date" sortBy="#{s.birthDate}">
						<h:outputText value="#{s.birthDate}" />
					</p:column>

					<p:column headerText="Gender" sortBy="#{mbStudent.genderText[s.gender]}">
						<h:outputText value="#{mbStudent.genderText[s.gender]}" />
					</p:column>

					<p:column headerText="Edit">
						<p:commandButton value="..." update=":form:editPnl"
							process="@this" onclick="PF('stdEditDlg').show()">
							<f:setPropertyActionListener value="#{s}"
								target="#{mbStudent.selectedStudent}" />
						</p:commandButton>
					</p:column>

					<p:column headerText="Delete">
						<p:commandButton value="X" action="#{mbStudent.removeStudent()}"
							ajax="false">
							<f:setPropertyActionListener value="#{s}"
								target="#{mbStudent.selectedStudent}" />
						</p:commandButton>
					</p:column>

					<p:column headerText="Expand">
						<p:commandButton value="+" update=":form:expandPnl"
							process="@this" onclick="PF('stdExpandDlg').show()">
							<f:setPropertyActionListener value="#{s}"
								target="#{mbStudent.selectedStudent}" />
						</p:commandButton>
					</p:column>



				</p:dataTable>

			</p:panel>

			<p:dialog header="Edit Student" widgetVar="stdEditDlg" modal="true">
				<p:panelGrid id="editPnl" columns="2">

					<p:outputLabel value="Student ID" />
					<h:outputText value="#{mbStudent.selectedStudent.studentId}" />

					<p:outputLabel value="English Name" />
					<p:inputText value="#{mbStudent.selectedStudent.studentEName}" />

					<p:outputLabel value="Arabic Name" />
					<p:inputText value="#{mbStudent.selectedStudent.studentEName}" />

					<p:outputLabel value="Mobile" />
					<p:inputText value="#{mbStudent.selectedStudent.mobile}" />

					<p:outputLabel value="Birth date" />
					<p:calendar value="#{mbStudent.selectedStudent.birthDate}"/>

					<p:outputLabel value="Gender" for="gender"/>
					<p:selectOneRadio id="gender" value="#{mbStudent.selectedStudent.gender}">
					<f:selectItem itemLabel="Male" itemValue="1"/>
					<f:selectItem itemLabel="Female" itemValue="2"/>
					</p:selectOneRadio>

					<p:outputLabel value="Email" />
					<p:inputText value="#{mbStudent.selectedStudent.email}" />

					<p:outputLabel value="University Name" for="uni" />
					<p:selectOneMenu id="uni"
						value="#{mbStudent.selectedStudent.university.universityId}">
						<f:selectItem itemLabel="Select One" itemValue="" />
						<f:selectItems value="#{mbStudent.studentTable}" var="u"
							itemLabel="#{u.university.universityEName}"
							itemValue="#{u.university.universityId}" />
					</p:selectOneMenu>

					<p:outputLabel value="School Name" for="school"/>
					<p:selectOneMenu id="school"
						value="#{mbStudent.selectedStudent.school.schoolId}">
						<f:selectItem itemLabel="Select One" itemValue="" />
						<f:selectItems value="#{mbStudent.studentTable}" var="s"
							itemLabel="#{s.school.schoolEName}"
							itemValue="#{s.school.schoolId}" />
					</p:selectOneMenu>

					<p:outputLabel value="Program Name" for="prog"/>
					<p:selectOneMenu id="prog"
						value="#{mbStudent.selectedStudent.program.programId}">
						<f:selectItem itemLabel="Select One" itemValue="" />
						<f:selectItems value="#{mbStudent.studentTable}" var="p"
							itemLabel="#{p.program.programEName}"
							itemValue="#{p.program.programId}" />
					</p:selectOneMenu>

					<p:outputLabel value="Final Average" />
					<p:inputText value="#{mbStudent.selectedStudent.finalAverage}" />

					<p:outputLabel value="Maximum Average" />
					<p:inputText value="#{mbStudent.selectedStudent.maxAverage}" />

					<p:outputLabel value="Rate" />
					<p:inputText value="#{mbStudent.selectedStudent.studentEName}" />

					<p:outputLabel value="Graduate Year" />
					<p:inputText value="#{mbStudent.selectedStudent.studentEName}" />

					<p:outputLabel value="Graduate Semester" />
					<p:inputText value="#{mbStudent.selectedStudent.studentEName}" />

					<p:commandButton value="Edit" action="#{mbStudent.updateStudent()}"
						ajax="false" />
					<p:commandButton value="Close" type="button"
						onclick="PF('stdEditDlg').hide()" />
				</p:panelGrid>


			</p:dialog>


			<p:dialog header="Student Information" widgetVar="stdExpandDlg"
				modal="true">

				<p:panel id="expandPnl">
				
					<p:dataTable value="#{mbStudent.studentTable}" var="s">
						<p:column headerText="Email" sortBy="#{s.email}">
							<h:outputText value="#{s.email}" />
						</p:column>

						<p:column headerText="University"
							sortBy="#{s.university.universityId}">
							<h:outputText value="#{s.university.universityId}" />
						</p:column>

						<p:column headerText="School" sortBy="#{s.school.schoolId}">
							<h:outputText value="#{s.school.schoolId}" />
						</p:column>

						<p:column headerText="Program" sortBy="#{s.program.programId}">
							<h:outputText value="#{s.program.programId}" />
						</p:column>

						<p:column headerText="Final Average" sortBy="#{s.finalAverage}">
							<h:outputText value="#{s.finalAverage}" />
						</p:column>

						<p:column headerText="Maximum Average" sortBy="#{s.maxAverage}">
							<h:outputText value="#{s.maxAverage}" />
						</p:column>

						<p:column headerText="Rate" sortBy="#{s.rate}">
							<h:outputText value="#{s.rate}" />
						</p:column>

						<p:column headerText="Graduate Year" sortBy="#{s.graduateYear}">
							<h:outputText value="#{s.graduateYear}" />
						</p:column>

						<p:column headerText="Graduate Semester"
							sortBy="#{s.graduateSemester}">
							<h:outputText value="#{s.graduateSemester}" />
						</p:column>
					</p:dataTable>
					<p:commandButton value="Close" type="button"
						onclick="PF('stdExpandDlg').hide()" />
				</p:panel>


			</p:dialog>

		</h:form>


	</ui:define>
</ui:composition>