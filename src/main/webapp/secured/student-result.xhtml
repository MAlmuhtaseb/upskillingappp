<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/template/template.xhtml">


	<ui:define name="title">Upskilling Web Application</ui:define>

	<ui:define name="content">
	
	<h:form id="form">
	
	<p:panel id="stdResultPanel">
	
	<p:dataTable value="#{mbStudentResult.studentResultTable}" var="r">
	
	<f:facet name="header">
	<h:outputText value="Student Results (#{mbStudentResult.studentResultTable.size()})" />
	</f:facet>
	
	<p:column headerText="Student Name" sortBy="#{r.student.studentEName}">
	<h:outputText value="#{r.student.studentEName}"/>
	</p:column>
	
	<p:column headerText="Course Name" sortBy="#{r.trainingCourse.courseEName}">
	<h:outputText value="#{r.trainingCourse.courseEName}"/>
	</p:column>
	
	<p:column headerText="English Mark" sortBy="#{r.englishMark}">
	<h:outputText value="#{r.englishMark}"/>
	</p:column>
	
	<p:column headerText="Interview Mark" sortBy="#{r.interviewMark}">
	<h:outputText value="#{r.interviewMark}" />
	</p:column>
	
	<p:column headerText="Accepted Flag" sortBy="#{mbStudentResult.flagText[r.acceptedFlag]}">
	<h:outputText value="#{mbStudentResult.flagText[r.acceptedFlag]}"/>
	</p:column>
	
	<p:column headerText="Notes" sortBy="#{r.notes}">
	<h:outputText value="#{r.notes}"/>
	</p:column>
	
	<p:column headerText="Edit">
					<p:commandButton value="..." update=":form:editPnl"
						process="@this" onclick="PF('resultEditDlg').show()">
						<f:setPropertyActionListener value="#{r}"
							target="#{mbStudentResult.selectedStudentResult}" />
					</p:commandButton>
				</p:column>

				<p:column headerText="Delete">
					<p:commandButton value="X"
						action="#{mbStudentResult.removeStudentResult()}" ajax="false">
						<f:setPropertyActionListener value="#{r}"
							target="#{mbStudentResult.selectedStudentResult}" />
					</p:commandButton>
				</p:column>
	
	</p:dataTable>
	
	</p:panel>
	
	<p:dialog header="Edit Result" widgetVar="resultEditDlg" modal="true">
	
	<p:panelGrid id="editPnl" columns="2">
	
	<p:outputLabel value="Student Name"/>
	<h:outputText value="#{mbStudentResult.selectedStudentResult.student.studentEName}" />
	
	<p:outputLabel value="Course Name" for="courseSelect" />
				<p:selectOneMenu id="courseSelect"
					value="#{mbStudentResult.selectedStudentResult.trainingCourse.courseId}">
					<f:selectItem itemLabel="Select Course" itemValue="" />
					<f:selectItems value="#{mbTrainingCourse.trainingCourseTable}"
						var="c" itemLabel="#{c.courseEName}" itemValue="#{c.courseId}" />
				</p:selectOneMenu>
	
	<p:outputLabel value="English Mark"/>
	<p:inputNumber value="#{mbStudentResult.selectedStudentResult.englishMark}"/>
	
	<p:outputLabel value="InterviewMark"/>
	<p:inputNumber value="#{mbStudentResult.selectedStudentResult.interviewMark}"/>
	
	<p:outputLabel value="Accepted Flag"/>
	<p:selectOneRadio value="#{mbStudentResult.selectedStudentResult.acceptedFlag}">
	<f:selectItem itemLabel="Accepted" itemValue="1"/>
	<f:selectItem itemLabel="Declined" itemValue="0"/>
	</p:selectOneRadio>
	
	<p:outputLabel value="Notes"/>
	<p:inputTextarea value="#{mbStudentResult.selectedStudentResult.notes}"/>
	
	<p:commandButton value="Edit" action="#{mbStudentResult.updateStudentResult()}" ajax="false"/>
	<p:commandButton value="Close" type="button" onclick="PF('resultEditDlg').hide()"/>
	</p:panelGrid>
	
	</p:dialog>
	
	</h:form>
	
	
	</ui:define>
</ui:composition>